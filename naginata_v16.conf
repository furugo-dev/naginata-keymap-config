# keymapper 薙刀式 v16（快速版）英数モードのキー配列変更に対応した版
# (https://github.com/deepprog/naginata-keymap-config)
# 
# 薙刀式配列v16（快速版）　　作　大岡俊彦
# 2025年4月18日[【薙刀式】v16快速版発表](http://oookaworks.seesaa.net/article/509198141.html#gsc.tab=0)
#
# keymapper version >= 5.2.0
#
#@options no-update
@allow-unmapped-commands
@enforce-lowercase-commands
@forward-modifiers Shift Control Alt
@virtual-keys-toggle false

# ローマ字　マクロ
  a = A ^ # あ
  i = I ^ # い
  u = U ^ # う
  e = E ^ # え
  o = O ^ # お
  ka = (K A) ^ # か
  ki = (K I) ^ # き
  ku = (K U) ^ # く
  ke = (K E) ^ # け
  ko = (K O) ^ # こ
  sa = (S A) ^ # さ
  si = (S I) ^ # し
  su = (S U) ^ # す
  se = (S E) ^ # せ
  so = (S O) ^ # そ
  ta = (T A) ^ # た
  ti = (T I) ^ # ち
  tu = (T U) ^ # つ
  te = (T E) ^ # て
  to = (T O) ^ # と
  na = (N A) ^ # な
  ni = (N I) ^ # に
  nu = (N U) ^ # ぬ
  ne = (N E) ^ # ね
  no = (N O) ^ # の
  ha = (H A) ^ # は
  hi = (H I) ^ # ひ
  hu = (H U) ^ # ふ
  he = (H E) ^ # へ
  ho = (H O) ^ # ほ
  ma = (M A) ^ # ま
  mi = (M I) ^ # み
  mu = (M U) ^ # む
  me = (M E) ^ # め
  mo = (M O) ^ # も
  ra = (R A) ^ # ら
  ri = (R I) ^ # り
  ru = (R U) ^ # る
  re = (R E) ^ # れ
  ro = (R O) ^ # ろ
  ya = (Y A) ^ # や
  yu = (Y U) ^ # ゆ
  yo = (Y O) ^ # よ
  wa = (W A) ^ # わ
  wo = (W O) ^ # を
  xn = (X N) ^ # ん
  xtu = (X T U) ^ # っ
  ltu = (L T U) ^ # っ
  ga = (G A) ^ # が
  gi = (G I) ^ # ぎ
  gu = (G U) ^ # ぐ
  ge = (G E) ^ # げ
  go = (G O) ^ # ご
  za = (Z A) ^ # ざ
  zi = (Z I) ^ # じ
  zu = (Z U) ^ # ず
  ze = (Z E) ^ # ぜ
  zo = (Z O) ^ # ぞ
  da = (D A) ^ # だ
  di = (D I) ^ # ぢ
  du = (D U) ^ # づ
  de = (D E) ^ # で
  do = (D O) ^ # ど
  ba = (B A) ^ # ば
  bi = (B I) ^ # び
  bu = (B U) ^ # ぶ
  be = (B E) ^ # べ
  bo = (B O) ^ # ぼ
  pa = (P A) ^ # ぱ
  pi = (P I) ^ # ぴ
  pu = (P U) ^ # ぷ
  pe = (P E) ^ # べ
  po = (P O) ^ # ぼ
  xa = (X A) ^ # ぁ
  xi = (X I) ^ # ぃ
  xu = (X U) ^ # ぅ
  xe = (X E) ^ # ぇ
  xo = (X O) ^ # ぉ
  xka = (X K A) ^ # ヵ
  xke = (X K E) ^ # ヶ
  xya = (X Y A) ^ # ゃ
  xyu = (X Y U) ^ # ゅ
  xyo = (X Y O) ^ # ょ
  xwa = (X W A) ^ # ゎ
  kya = (K Y A) ^ # きゃ
  kyu = (K Y U) ^ # きゅ
  kyo = (K Y O) ^ # きょ
  sya = (S Y A) ^ # しゃ
  syu = (S Y U) ^ # しゅ
  syo = (S Y O) ^ # しょ
  tya = (T Y A) ^ # ちゃ
  tyu = (T Y U) ^ # ちゅ
  tyo = (T Y O) ^ # ちょ
  nya = (N Y A) ^ # にゃ
  nyu = (N Y U) ^ # にゅ
  nyo = (N Y O) ^ # にょ
  hya = (H Y A) ^ # ひゃ
  hyu = (H Y U) ^ # ひゅ
  hyo = (H Y O) ^ # ひょ
  mya = (M Y A) ^ # みゃ
  myu = (M Y U) ^ # みゅ
  myo = (M Y O) ^ # みょ
  rya = (R Y A) ^ # りゃ
  ryu = (R Y U) ^ # りゅ
  ryo = (R Y O) ^ # りょ
  gya = (G Y A) ^ # ぎゃ
  gyu = (G Y U) ^ # ぎゅ
  gyo = (G Y O) ^ # ぎょ
  zya = (Z Y A) ^ # じゃ
  zyu = (Z Y U) ^ # じゅ
  zyo = (Z Y O) ^ # じょ
  dya = (D Y A) ^ # ぢゃ
  dyu = (D Y U) ^ # ぢゅ
  dyo = (D Y O) ^ # ぢょ
  bya = (B Y A) ^ # びゃ
  byu = (B Y U) ^ # びゅ
  byo = (B Y O) ^ # びょ
  pya = (P Y A) ^ # ぴゃ
  pyu = (P Y U) ^ # ぴゅ
  pyo = (P Y O) ^ # ぴょ
  fa = (F A) ^ # ふぁ
  fi = (F I) ^ # ふぃ
  fyu = (F Y U) ^ # ふゅ
  fe = (F E) ^ # ふぇ
  fo = (F O) ^ # ふぉ
  va = (V A) ^ # ヴぁ
  vi = (V I) ^ # ヴぃ
  vu = (V U) ^ # ヴ
  ve = (V E) ^ # ヴぇ
  vo = (V O) ^ # ヴぉ
  vyu = (V Y U) ^ # ヴゅ
  qa = (Q A) ^ # くぁ
  qi = (Q I) ^ # くぃ
  qe = (Q E) ^ # くぇ
  qo = (Q O) ^ # くぉ
  kuxwa = (K U X W A) ^ # くゎ
  gwa = (G W A) ^ # ぐぁ
  gwi = (G W I) ^ # ぐぃ
  gwe = (G W E) ^ # ぐぇ
  gwo = (G W O) ^ # ぐぉ
  guxwa = (G U X W A) ^ # ぐゎ
  tsa = (T S A) ^ # つぁ
  wi = (W I) ^ # うぃ
  we = (W E) ^ # うぇ
  who = (W H O) ^ # うぉ
  sye = (S Y E) ^ # しぇ
  tye = (T Y E) ^ # ちぇ
  je = (J E) ^ # じぇ
  dye = (D Y E) ^ # ぢぇ
  ye = (Y E) ^ # いぇ
  thi = (T H I) ^ # てぃ
  dhi = (D H I) ^ # でぃ
  thu = (T H U) ^ # てゅ
  dhu = (D H U) ^ # でゅ
  twu = (T W U) ^ # とぅ
  dwu = (D W U) ^ # どぅ

# システム共通の　キー定義
  BS = Backspace
  C_ = Control
  CR = Enter
  ESC = Escape
  ESCx = repeat[ Escape, default[$0, 1] ] # {Escape $0}
  M_ = Meta
  RET = Enter
  S_ = Shift
  SP_ = Space
  SP_x = repeat[ Space, default[$0, 1] ] # {Space $0}
  UP = ArrowUp # {↑}
  UPx = repeat[ ArrowUp, default[$0, 1] ] # {↑ $0}
  DOWN = ArrowDown # {↓}
  DOWNx = repeat[ ArrowDown, default[$0, 1] ] # {↓ $0}
  LEFT = ArrowLeft  # {←}
  LEFTx = repeat[ ArrowLeft, default[$0, 1] ] # {← $0}
  RIGHT = ArrowRight # {→}
  RIGHTx = repeat[ ArrowRight, default[$0, 1] ] # {→ $0}
  DEL = Delete # {Del}
  DELx = repeat[ Delete, default[$0, 1] ] # {Del $0}
[default]

# システム別のキー定義
# MacOS 標準IME　Windows風のキー操作をON 条件で設定
[system="MacOS"]
  ime_on = IMEState Lang1 # かなオン
  ime_off = !IMEState 16ms Lang2 # かなオフ

  CHR = $(printf "$0" | LANG=ja_JP.UTF-8 pbcopy) 64ms Meta{V} 64ms
  STR = CHR["$0"] ^
  PREV = Control{P} 32ms # 1行　戻る
  NEXT = Control{N} 32ms # 1行　進む
  HOME = Control{A} 32ms # {Home}
  END = Control{E} 32ms # {End}
  BUN_MATU = Meta{ArrowDown} #文末に移動
  COPY = Meta{C} 32ms
  PASTE = Meta{V} 32ms
  CUT = Meta{X} 32ms
  SAI_HEN = Lang1 Lang1 # 再変換
  KATA_HEN = Control{I} # ^i カタカナ
  HIRA_HEN = Control{U} # ^u ひらがな
  SAVE = Meta{S} # ファイル保存
  Undo = Meta{Z} # Undo
  Redo = Shift{Meta{Z}} # Redo
  CLIP_CLR = CHR["　"] (Shift Control){B} 24ms Meta{X} 24ms
[default]

[system="Windows"]
  ime_on = IMEState Lang1 # かなオン
  ime_off = !IMEState 16ms Lang2 # かなオフ
  ime_complete = Slash Enter Backspace # 汎用: Slash Enter Backspace   # 「・」が残る欠点あり
  ime_pause = ime_complete Lang2
  ime_resume = Lang1

  CHR = "$0" Enter
  STR = ime_pause "$0" ime_resume ^
  PREV = ArrowRight # 1行戻る 縦書き 右移動
  NEXT = ArrowLeft # 1行進む 縦書き 左移動
  HOME = Home # {Home}
  END = End # {End}
  BUN_MATU = Control{End} #文末に移動
  COPY = Control{C}
  PASTE = Control{V{130ms}}
  CUT = Control{X}
  SAI_HEN = M_{Slash} IMEState # 再変換
  KATA_HEN = F7 # ^i カタカナ
  HIRA_HEN = F6 # ^u ひらがな
  SAVE = Control{S} # ファイル保存
  Undo = Control{Z} # Undo
  Redo = Control{Y} # Redo
  CLIP_CLR = Enter{24ms} Space Shift{Home} Control{X} Backspace # コピークリア
[default]

[system="Linux"]
# Mozcのキー設定を追加　変換　無変換キー　IMEオンオフ
# 直接入力	    Henkan	   IMEを有効化
# 入力文字無し Muhenkan IMEを無効化

  ime_on = IMEState Convert# かなオン
  ime_off = !IMEState 16ms NonConvert # かなオフ
  ime_complete = Slash Enter Backspace # 汎用: Slash Enter Backspace   # 「・」が残る欠点あり

# クリップボードに文字を渡すために　xsel をインストールをする
  CHR = ime_complete $(printf "$0" | xsel -i -b) 32ms Control{V} 32ms
  STR = CHR["$0"] ^
  PREV = ArrowRight # 1行戻る 縦書き 右移動
  NEXT = ArrowLeft # 1行進む 縦書き 左移動
  HOME = Home # {Home}
  END = End # {End}
  BUN_MATU = Control{End} #文末に移動
  COPY = Control{C}
  PASTE = Control{V{130ms}}
  CUT = Control{X}
  SAI_HEN = M_{Slash} IMEState # 再変換
  KATA_HEN = F7 # ^i カタカナ
  HIRA_HEN = F6 # ^u ひらがな
  SAVE = Control{S} # ファイル保存
  Undo = Control{Z} # Undo
  Redo = Control{Y} # Redo
  CLIP_CLR = Enter{24ms} Space Shift{Home} Control{X} Backspace # コピークリアs
[default]

# 引数の有効無効　マクロ
  Q1 = ($5 $6) >> $0
  Q2 = ($5 $7) >> $1
  Q3 = ($5 $8) >> $2
  Q4 = ($5 $9) >> $3
  Q5 = ($5 $10) >> $4

  Q12345 = Q1; Q2; Q3; Q4; Q5
  Q1234_ = Q1; Q2; Q3; Q4
  Q123_5 = Q1; Q2; Q3;     Q5
  Q123__ = Q1; Q2; Q3
  Q12_45 = Q1; Q2;     Q4; Q5
  Q12_4_ = Q1; Q2;     Q4
  Q12__5 = Q1; Q2;         Q5
  Q12___ = Q1; Q2
  Q1_345 = Q1;     Q3; Q4; Q5
  Q1_34_ = Q1;     Q3; Q4 
  Q1_3_5 = Q1;     Q3      Q5
  Q1_3__ = Q1;     Q3
  Q1__45 = Q1;         Q4; Q5
  Q1__4_ = Q1;         Q4
  Q1___5 = Q1;             Q5
  Q1____ = Q1
  Q_2345 =     Q2; Q3; Q4; Q5
  Q_234_ =     Q2; Q3; Q4
  Q_23_5 =     Q2; Q3;     Q5
  Q_23__ =     Q2; Q3
  Q_2_45 =     Q2;     Q4; Q5
  Q_2_4_ =     Q2;     Q4
  Q_2__5 =     Q2;         Q5
  Q_2___ =     Q2
  Q__345 =         Q3; Q4; Q5
  Q__34_ =         Q3; Q4 
  Q__3_5 =         Q3;     Q5
  Q__3__ =         Q3
  Q___45 =             Q4; Q5
  Q___4_ =             Q4
  Q____5 =                 Q5

# センターシフト　マクロ
  CS_KB_ = $10{$11} >> $0; $10{$12} >> $1; $10{$13} >> $2; $10{$14} >> $3; $10{$15} >> $4; $10{$16} >> $5; $10{$17} >> $6; $10{$18} >> $7; $10{$19} >> $8; $10{$20} >> $9
  CS_KB_Q = CS_KB_[ $0, $1, $2, $3, $4, $5, $6, $7, $8, $9, Space, Q,W,E,R,T,Y,U,I,O,P ]
  CS_KB_A = CS_KB_[ $0, $1, $2, $3, $4, $5, $6, $7, $8, $9, Space, A,S,D,F,G,H,J,K,L,Semicolon ]
  CS_KB_Z = CS_KB_[ $0, $1, $2, $3, $4, $5, $6, $7, $8, $9, Space, Z,X,C,V,B,N,M,Comma,Period,Slash ]
# 単打　マクロ
  KB_ = $10 >> $0; $11 >> $1; $12 >> $2; $13 >> $3; $14 >> $4; $15 >> $5; $16 >> $6; $17 >> $7; $18 >> $8; $19 >> $9
  KB_Q = KB_[ $0, $1, $2, $3, $4, $5, $6, $7, $8, $9, Q,W,E,R,T,Y,U,I,O,P ]
  KB_A = KB_[ $0, $1, $2, $3, $4, $5, $6, $7, $8, $9, A,S,D,F,G,H,J,K,L,Semicolon ]
  KB_Z = KB_[ $0, $1, $2, $3, $4, $5, $6, $7, $8, $9, Z,X,C,V,B,N,M,Comma,Period,Slash ]

[default]

# 薙刀式　定義開始

  NaginataOff = Virtual
  IMEState = Virtual

# =============================================
# 英数モード
# =============================================
# Controlが押下時の配列をQwertyままか、変更後のキー配列に変更するかコメントアウトで選択する
# 
[modifier = "!NaginataOff !IMEState !Meta !Alt !Control"] # Control + Qwerty
# [modifier = "!NaginataOff !IMEState !Meta !Alt"]        # Control + 変更後のキー配列

# ********** 3キー同時 **********
# 編集モード1
# D F 右手
  Q12345[          HOME^, S_{END} BS^,  SAI_HEN^,          DEL^, S_{ESCx[3]}^, D F, Y,U,I,O,P ]
  Q12345[ S_{Enter} END^,         UP^,   S_{UP}^,   S_{UPx[7]}^,    KATA_HEN^, D F, H,J,K,L,Semicolon]
  Q12345[           END^,       DOWN^, S_{DOWN}^, S_{DOWNx[7]}^,    HIRA_HEN^, D F, N,M,Comma,Period,Slash ]
# 左手 J K
  Q12345[    BUN_MATU^, CHR["／"]^,           ,      SAVE^, CHR["・"]^, J K, Q,W,E,R,T ]
  Q12345[ STR["……"] , CHR["『"]^, CHR["？"]^, CHR["「"]^, CHR["（"]^, J K, A,S,D,F,G ]
  Q12345[ CHR["――"]^, CHR["』"]^, CHR["！"]^, CHR["」"]^, CHR["）"]^, J K, Z,X,C,V,B ]

# 編集モード2
# C V　右手
  Q12345[ S_{HOME}^,      CUT^,   SAI_HEN^,        PASTE^,          Undo^, C V, Y,U,I,O,P ]
  Q12345[     COPY^,     LEFT^,     RIGHT^,     CLIP_CLR^,          Redo^, C V, H,J,K,L,Semicolon ]
  Q12345[  S_{END}^, S_{LEFT}^, S_{RIGHT}^, S_{LEFTx[7]}^, S_{RIGHTx[7]}^, C V, N,M,Comma,Period,Slash ]
# 左手 M Comma
  Q12345[ CHR["｜"]^, STR["　　　×　　　×　　　×"] CR, HOME PREV END DELx[2] NEXT^, HOME CR{24ms} SP_x[1] NEXT^,            CHR["〇"]^, M Comma, Q,W,E,R,T ]
  Q12345[ CHR["《"]^,                         CHR["【"]^, HOME PREV END DELx[4] NEXT^, HOME CR{24ms} SP_x[3] NEXT^,              SP_x[3]^, M Comma, A,S,D,F,G ]
  Q12345[ CHR["》"]^,                         CHR["】"]^,               CHR["」"] CR^,     CHR["」"] CR CHR["「"]^, CHR["」"] CR SP_x[1]^, M Comma, Z,X,C,V,B ]

# ********** 2キー同時 **********
# 機能部分
  (H J) >> ime_on ^
  (F G) >> ime_off ^
  (V M) >> Enter ^

# 英数モードのキー配列を変更する
#  @include "dvorak.conf" # Dvorak配列
#  @include "oonisi.conf" # 大西配列

# SandS
  Space{Any} >> Shift{Any}

[default]

# =============================================
# かなモード
# =============================================
[modifier = "!NaginataOff IMEState !Meta !Control !Alt"]
# 左右シフト+アルファベット で英数モードに
  Alpha = A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z
  Shift{Alpha} >> Shift{Alpha} !Shift Enter ime_off ^

# 左右シフト+アルファベット以外
  apply[ Shift{$0} >> Shift{$0}, Semicolon, Comma, Period, Slash ]

# ********** 3キー同時 **********
# 編集モード1
# D F 右手
  Q12345[          HOME^, S_{END} BS^,  SAI_HEN^,          DEL^, S_{ESCx[3]}^, D F, Y,U,I,O,P ]
  Q12345[ S_{Enter} END^,         UP^,   S_{UP}^,   S_{UPx[7]}^,    KATA_HEN^, D F, H,J,K,L,Semicolon ]
  Q12345[           END^,       DOWN^, S_{DOWN}^, S_{DOWNx[7]}^,    HIRA_HEN^, D F, N,M,Comma,Period,Slash ]
# 左手 J K
  NAKA_GURO = Slash # ”・”　中黒
  Q12_45[    BUN_MATU^, CHR["／"]^, /* でぃ */,      SAVE^,   NAKA_GURO^, J K, Q,W,E,R,T ] # Eは「でぃ」で使うのでQ12_45にする
  Q12345[ STR["……"] , CHR["『"]^, CHR["？"]^, CHR["「"]^,   CHR["（"]^, J K, A,S,D,F,G ]
  Q12345[ CHR["――"]^, CHR["』"]^, CHR["！"]^, CHR["」"]^,   CHR["）"]^, J K, Z,X,C,V,B ]

# 編集モード2
# C V　右手
  Q12345[ S_{HOME}^,      CUT^,   SAI_HEN^,        PASTE^,          Undo^, C V, Y,U,I,O,P ]
  Q12345[     COPY^,     LEFT^,     RIGHT^,     CLIP_CLR^,          Redo^, C V, H,J,K,L,Semicolon ]
  Q12345[  S_{END}^, S_{LEFT}^, S_{RIGHT}^, S_{LEFTx[7]}^, S_{RIGHTx[7]}^, C V, N,M,Comma,Period,Slash]
# 左手 M Comma
  Q12345[ CHR["｜"]^, STR["　　　×　　　×　　　×"] CR, HOME PREV END DELx[2] NEXT^, HOME CR{24ms} SP_x[1] NEXT^,            CHR["〇"]^, M Comma, Q,W,E,R,T ]
  Q12345[ CHR["《"]^,                         CHR["【"]^, HOME PREV END DELx[4] NEXT^, HOME CR{24ms} SP_x[3] NEXT^,              SP_x[3]^, M Comma, A,S,D,F,G ]
  Q12345[ CHR["》"]^,                         CHR["】"]^,               CHR["」"] CR^,     CHR["」"] CR CHR["「"]^, CHR["」"] CR SP_x[1]^, M Comma, Z,X,C,V,B ]

# 固有名詞ショートカット
# 左手　U I
  Q12345[ STR[""], STR["天空のファルコーン"], STR["天ファル"], STR["神山"],         STR[""], U I, Q,W,E,R,T ]
  Q12345[ STR[""],           STR["ミツルギ"],     STR["韮澤"],     STR[""], STR["チャンプ"], U I, A,S,D,F,G ]
  Q12345[ STR[""],                   STR[""],         STR[""],     STR[""],         STR[""], U I, Z,X,C,V,B ]
# E R　右手
  Q12345[     STR[""], STR[""], STR[""], STR["えりりん"],     STR[""], E R, Y,U,I,O,P ]
  Q12345[ STR["山根"], STR[""], STR[""],         STR[""], STR["深町"], E R, H,J,K,L,Semicolon ]
  Q12345[     STR[""], STR[""], STR[""],     STR["渡辺"],     STR[""], E R, N,M,Comma,Period,Slash ]

# 拗音、外来音
  Q__3_5[       ___, ___, gyo[ぎょ], ___, gyu[ぎゅ], W J, Y,U,I,O,P ]
  Q1____[ gya[ぎゃ], ___,       ___, ___,       ___, W J, H,J,K,L,Semicolon ]
  Q__3_5[       ___, ___, zyo[じょ], ___, zyu[じゅ], R J, Y,U,I,O,P ]
  Q1____[ zya[じゃ], ___,       ___, ___,       ___, R J, H,J,K,L,Semicolon ]
  Q__3_5[       ___, ___, dyo[ぢょ], ___, dyu[ぢゅ], G J, Y,U,I,O,P ]
  Q1____[ dya[ぢゃ], ___,       ___, ___,       ___, G J, H,J,K,L,Semicolon ]
  Q__3_5[       ___, ___, byo[びょ], ___, byu[びゅ], X J, Y,U,I,O,P ]
  Q1____[ bya[びゃ], ___,       ___, ___,       ___, X J, H,J,K,L,Semicolon ]
  Q__3_5[       ___, ___, pyo[ぴょ], ___, pyu[ぴゅ], X M, Y,U,I,O,P ]
  Q1____[ pya[ぴゃ], ___,       ___, ___,       ___, X M, H,J,K,L,Semicolon ]
  
  Q_2___[ ____, dhi[でぃ], ____, ____, ____,  E K, H,J,K,L,Semicolon ]
  Q_2___[ ____, thi[てぃ], ____, ____, ____,  E K, N,M,Comma,Period,Slash ]
  Q_2___[ ____, dhu[でゅ], ____, ____, ____,  E P, H,J,K,L,Semicolon ]
  Q_2___[ ____, thu[てゅ], ____, ____, ____,  E P, N,M,Comma,Period,Slash ]

  Q_2___[ ____, dwu[どぅ], ____, ____, ____,  D L, H,J,K,L,Semicolon ]
  Q_2___[ ____, twu[とぅ], ____, ____, ____,  D L, N,M,Comma,Period,Slash ]

  Q_2___[ ____,  je[じぇ], ____, ____, ____,  R O, H,J,K,L,Semicolon ]
  Q_2___[ ____, sye[しぇ], ____, ____, ____,  R O, N,M,Comma,Period,Slash ]
  Q_2___[ ____, dye[ぢぇ], ____, ____, ____,  G O, H,J,K,L,Semicolon ]
  Q_2___[ ____, tye[ちぇ], ____, ____, ____,  G O, N,M,Comma,Period,Slash ]

  Q___45[      ___,      ___,      ___, fe[ふぇ], fyu[ふゅ], V Semicolon, Y,U,I,O,P ]
  Q_23__[      ___, fa[ふぁ], fi[ふぃ],      ___,       ___, V Semicolon, H,J,K,L,Semicolon ]
  Q1____[ fo[ふぉ],      ___,      ___,      ___,       ___, V Semicolon, N,M,Comma,Period,Slash ]

  Q___45[      ___,      ___,      ___, ve[ゔぇ], vyu[ゔゅ], F L, Y,U,I,O,P ]
  Q_23_5[      ___, va[ゔぁ], vi[ゔぃ],      ___,    vu[ゔ], F L, H,J,K,L,Semicolon ]
  Q1____[ vo[ゔぉ],      ___,      ___,      ___,       ___, F L, N,M,Comma,Period,Slash ]

  Q___4_[       ___,       ___,       ___, we[うぇ], ___, V L, Y,U,I,O,P ]
  Q_23__[       ___, tsa[つぁ],  wi[うぃ],      ___, ___, V L, H,J,K,L,Semicolon ]
  Q1____[ who[うぉ],       ___,       ___,      ___, ___, V L, N,M,Comma,Period,Slash ]

  Q__3__[       ___,       ___,  ye[いぇ],      ___, ___, V O, H,J,K,L,Semicolon ]

  Q___4_[       ___,       ___,       ___,    qe[くぇ], ___, V H, Y,U,I,O,P ]
  Q_23__[       ___,  qa[くぁ],  qi[くぃ],         ___, ___, V H, H,J,K,L,Semicolon ]
  Q1__4_[  qo[くぉ],       ___,       ___, kuxwa[くゎ], ___, V H, N,M,Comma,Period,Slash ]

  Q___4_[       ___,       ___,       ___,   gwe[ぐぇ], ___, F H, Y,U,I,O,P ]
  Q_23__[       ___, gwa[ぐぁ], gwi[ぐぁ],       _____, ___, F H, H,J,K,L,Semicolon ]
  Q1__4_[ gwo[ぐぉ],       ___,       ___, guxwa[ぐゎ], ___, F H, N,M,Comma,Period,Slash ]

# ********** 2キー同時 **********
# 濁音
# 左手　{右濁音}
  Q_234_[    ___, gi[ぎ], de[で], zi[じ],    ___, J, Q,W,E,R,T ]
  Q12345[ ze[ぜ], ge[げ], do[ど], ga[が], di[ぢ], J, A,S,D,F,G ]
  Q12345[ bo[ぼ], bi[び], ba[ば], go[ご], zo[ぞ], J, Z,X,C,V,B ]
# {左濁音}　右手
  Q_2_45[    ___,za[ざ], ____, zu[ず], be[べ], F, Y,U,I,O,P ]
  Q1__45[ gu[ぐ],   ___, ____, du[づ], bu[ぶ], F, H,J,K,L,Semicolon ]
  Q1____[ da[だ],   ___, ____,    ___,    ___, F, N,M,Comma,Period,Slash ]

# 半濁音
# {左半濁音}　右手
  Q____5[    ___,   ____,    ___, ___, pe[ぺ], V, Y,U,I,O,P ]
  Q____5[    ___,   ____,    ___, ___, pu[ぷ], V, H,J,K,L,Semicolon ]
# 左手　{右半濁音}
  Q123__[ po[ぽ], pi[ぴ], pa[ぱ], ___,    ___, M, Z,X,C,V,B ]

# 小書き
  Q_2_4_[     ___, xke[ヶ],     ___, xka[ヵ],     ___, Q, A,S,D,F,G ]
  Q__345[     ___,     ___, xyo[ょ],  xe[ぇ], xyu[ゅ], Q, Y,U,I,O,P ]
  Q1234_[ xya[ゃ],  xa[ぁ],  xi[ぃ],  xu[ぅ],     ___, Q, H,J,K,L,Semicolon ]
  Q1__4_[  xo[ぉ],    ___ ,     ___, xwa[ゎ],     ___, Q, N,M,Comma,Period,Slash ]

# 拗音、外来音
  Q_234_[ ___, kya[きゃ], rya[りゃ], sya[しゃ],       ___, H, Q,W,E,R,T ]
  Q_23_5[ ___, mya[みゃ], nya[にゃ],       ___, tya[ちゃ], H, A,S,D,F,G ]
  Q_2___[ ___, hya[ひゃ],       ___,       ___,       ___, H, Z,X,C,V,B ]
  Q_234_[ ___, kyu[きゅ], ryu[りゅ], syu[しゅ],       ___, P, Q,W,E,R,T ]
  Q_23_5[ ___, myu[みゅ], nyu[にゅ],       ___, tyu[ちゅ], P, A,S,D,F,G ]
  Q_2___[ ___, hyu[ひゅ],       ___,       ___,       ___, P, Z,X,C,V,B ]
  Q_234_[ ___, kyo[きょ], ryo[りょ], syo[しょ],       ___, I, Q,W,E,R,T ]
  Q_23_5[ ___, myo[みょ], nyo[にょ],       ___, tyo[ちょ], I, A,S,D,F,G ]
  Q_2___[ ___, hyo[ひょ],       ___,       ___,       ___, I, Z,X,C,V,B ]

# 機能部分
  (H J) >> ime_on ^
  (F G) >> ime_off ^
  (V M) >> Enter ^

# ********** センターシフト **********
  TOU_TEN = ( Comma Enter )^ # "、" 読点（とうてん）
  KU_TEN = ( Period Enter )^ # "。" 句点（くてん）

  CS_KB_Q[       , nu[ぬ],  ri[り],      me[め], S_{LEFT[シ左]}, S_{RIGHT[シ右]},     sa[さ], yo[よ],  e[え], yu[ゆ] ]
  CS_KB_A[ se[せ], mi[み],  ni[に],      ma[ま],         ti[ち],          ya[や],     no[の], mo[も], tu[つ], hu[ふ] ]
  CS_KB_Z[ ho[ほ], hi[ひ],  wo[を], TOU_TEN[、],         mu[む],           o[お], KU_TEN[。], ne[ね], wa[わ], re[れ] ]

# ********** 単打 **********
  ON_BIKI = Minus ^ # "ー" 音引き（おんびき）

  KB_Q[       , ki[き], te[て], si[し], LEFT[左], RIGHT[右], BS[後], ru[る], su[す],      he[へ] ]
  KB_A[ ro[ろ], ke[け], to[と], ka[か],  xtu[っ],    ku[く],  a[あ],  i[い],  u[う], ON_BIKI[ー] ]
  KB_Z[ ho[ほ], hi[ひ], ha[は], ko[こ],   so[そ],    ta[た], na[な], xn[ん], ra[ら],      re[れ] ]

[default]
  (Control Shift){0} >> NaginataOff ^ # 薙刀式オフ
  (Control Shift){1} >> !NaginataOff ^ # 薙刀式再開
