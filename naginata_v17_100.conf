# keymapper 薙刀式v17百式
#
# 薙刀式配列v17（ベスト版）仮+百式漢直　　作　大岡俊彦
# 2025年11月30日[【薙刀式】百式漢直の配列図と仕組み](http://oookaworks.seesaa.net/article/519241715.html#comment&gsc.tab=0)

#@options no-update
@allow-unmapped-commands
@enforce-lowercase-commands
@forward-modifiers Shift Control Alt
@virtual-keys-toggle false

#@include "naginata_alias.conf" # 定義をnaginata_alias.confに分割後に有効にする
#定義をファイル分割する箇所
# naginata_alias.conf
  a = A ^ # あ
  i = I ^ # い
  u = U ^ # う
  e = E ^ # え
  o = O ^ # お
  ka = (K A) ^ # か
  ki = (K I) ^ # き
  ku = (K U) ^ # く
  ke = (K E) ^ # け
  ko = (K O) ^ # こ
  sa = (S A) ^ # さ
  si = (S I) ^ # し
  su = (S U) ^ # す
  se = (S E) ^ # せ
  so = (S O) ^ # そ
  ta = (T A) ^ # た
  ti = (T I) ^ # ち
  tu = (T U) ^ # つ
  te = (T E) ^ # て
  to = (T O) ^ # と
  na = (N A) ^ # な
  ni = (N I) ^ # に
  nu = (N U) ^ # ぬ
  ne = (N E) ^ # ね
  no = (N O) ^ # の
  ha = (H A) ^ # は
  hi = (H I) ^ # ひ
  hu = (H U) ^ # ふ
  he = (H E) ^ # へ
  ho = (H O) ^ # ほ
  ma = (M A) ^ # ま
  mi = (M I) ^ # み
  mu = (M U) ^ # む
  me = (M E) ^ # め
  mo = (M O) ^ # も
  ra = (R A) ^ # ら
  ri = (R I) ^ # り
  ru = (R U) ^ # る
  re = (R E) ^ # れ
  ro = (R O) ^ # ろ
  ya = (Y A) ^ # や
  yu = (Y U) ^ # ゆ
  yo = (Y O) ^ # よ
  wa = (W A) ^ # わ
  wo = (W O) ^ # を
  xn = (X N) ^ # ん
  xtu = (X T U) ^ # っ
  ltu = (L T U) ^ # っ
  ga = (G A) ^ # が
  gi = (G I) ^ # ぎ
  gu = (G U) ^ # ぐ
  ge = (G E) ^ # げ
  go = (G O) ^ # ご
  za = (Z A) ^ # ざ
  zi = (Z I) ^ # じ
  zu = (Z U) ^ # ず
  ze = (Z E) ^ # ぜ
  zo = (Z O) ^ # ぞ
  da = (D A) ^ # だ
  di = (D I) ^ # ぢ
  du = (D U) ^ # づ
  de = (D E) ^ # で
  do = (D O) ^ # ど
  ba = (B A) ^ # ば
  bi = (B I) ^ # び
  bu = (B U) ^ # ぶ
  be = (B E) ^ # べ
  bo = (B O) ^ # ぼ
  pa = (P A) ^ # ぱ
  pi = (P I) ^ # ぴ
  pu = (P U) ^ # ぷ
  pe = (P E) ^ # べ
  po = (P O) ^ # ぼ
  xa = (X A) ^ # ぁ
  xi = (X I) ^ # ぃ
  xu = (X U) ^ # ぅ
  xe = (X E) ^ # ぇ
  xo = (X O) ^ # ぉ
  xka = (X K A) ^ # ヵ
  xke = (X K E) ^ # ヶ
  xya = (X Y A) ^ # ゃ
  xyu = (X Y U) ^ # ゅ
  xyo = (X Y O) ^ # ょ
  xwa = (X W A) ^ # ゎ
  kya = (K Y A) ^ # きゃ
  kyu = (K Y U) ^ # きゅ
  kyo = (K Y O) ^ # きょ
  sya = (S Y A) ^ # しゃ
  syu = (S Y U) ^ # しゅ
  syo = (S Y O) ^ # しょ
  tya = (T Y A) ^ # ちゃ
  tyu = (T Y U) ^ # ちゅ
  tyo = (T Y O) ^ # ちょ
  nya = (N Y A) ^ # にゃ
  nyu = (N Y U) ^ # にゅ
  nyo = (N Y O) ^ # にょ
  hya = (H Y A) ^ # ひゃ
  hyu = (H Y U) ^ # ひゅ
  hyo = (H Y O) ^ # ひょ
  mya = (M Y A) ^ # みゃ
  myu = (M Y U) ^ # みゅ
  myo = (M Y O) ^ # みょ
  rya = (R Y A) ^ # りゃ
  ryu = (R Y U) ^ # りゅ
  ryo = (R Y O) ^ # りょ
  gya = (G Y A) ^ # ぎゃ
  gyu = (G Y U) ^ # ぎゅ
  gyo = (G Y O) ^ # ぎょ
  zya = (Z Y A) ^ # じゃ
  zyu = (Z Y U) ^ # じゅ
  zyo = (Z Y O) ^ # じょ
  dya = (D Y A) ^ # ぢゃ
  dyu = (D Y U) ^ # ぢゅ
  dyo = (D Y O) ^ # ぢょ
  bya = (B Y A) ^ # びゃ
  byu = (B Y U) ^ # びゅ
  byo = (B Y O) ^ # びょ
  pya = (P Y A) ^ # ぴゃ
  pyu = (P Y U) ^ # ぴゅ
  pyo = (P Y O) ^ # ぴょ
  fa = (F A) ^ # ふぁ
  fi = (F I) ^ # ふぃ
  fyu = (F Y U) ^ # ふゅ
  fe = (F E) ^ # ふぇ
  fo = (F O) ^ # ふぉ
  va = (V A) ^ # ヴぁ
  vi = (V I) ^ # ヴぃ
  vu = (V U) ^ # ヴ
  ve = (V E) ^ # ヴぇ
  vo = (V O) ^ # ヴぉ
  vyu = (V Y U) ^ # ヴゅ
  qa = (Q A) ^ # くぁ
  qi = (Q I) ^ # くぃ
  qe = (Q E) ^ # くぇ
  qo = (Q O) ^ # くぉ
  kuxwa = (K U X W A) ^ # くゎ
  gwa = (G W A) ^ # ぐぁ
  gwi = (G W I) ^ # ぐぃ
  gwe = (G W E) ^ # ぐぇ
  gwo = (G W O) ^ # ぐぉ
  guxwa = (G U X W A) ^ # ぐゎ
  tsa = (T S A) ^ # つぁ
  wi = (W I) ^ # うぃ
  we = (W E) ^ # うぇ
  who = (W H O) ^ # うぉ
  sye = (S Y E) ^ # しぇ
  tye = (T Y E) ^ # ちぇ
  je = (J E) ^ # じぇ
  dye = (D Y E) ^ # ぢぇ
  ye = (Y E) ^ # いぇ
  thi = (T H I) ^ # てぃ
  dhi = (D H I) ^ # でぃ
  thu = (T H U) ^ # てゅ
  dhu = (D H U) ^ # でゅ
  twu = (T W U) ^ # とぅ
  dwu = (D W U) ^ # どぅ

# システム共通の　キー定義
  BS = Backspace
  C_ = Control
  CR = Enter
  ESC = Escape
  ESCx = repeat[ Escape, default[$0, 1] ] # {Escape $0}
  M_ = Meta
  RET = Enter
  S_ = Shift
  SP_ = Space
  SP_x = repeat[ Space, default[$0, 1] ] # {Space $0}
  UP = ArrowUp # {↑}
  UPx = repeat[ ArrowUp, default[$0, 1] ] # {↑ $0}
  DOWN = ArrowDown # {↓}
  DOWNx = repeat[ ArrowDown, default[$0, 1] ] # {↓ $0}
  LEFT = ArrowLeft  # {←}
  LEFTx = repeat[ ArrowLeft, default[$0, 1] ] # {← $0}
  RIGHT = ArrowRight # {→}
  RIGHTx = repeat[ ArrowRight, default[$0, 1] ] # {→ $0}
  DEL = Delete # {Del}
  DELx = repeat[ Delete, default[$0, 1] ] # {Del $0}
[default]

# システム別のキー定義
# MacOS 標準IME　Windows風のキー操作をON 条件で設定
[system="MacOS"]
  _ = CHR["$0"] ^
  CHR = $(printf "$0" | LANG=ja_JP.UTF-8 pbcopy) 64ms Meta{V} 64ms
  STR = CHR["$0"] ^

  PREV = Control{P} 32ms # 1行　戻る
  NEXT = Control{N} 32ms # 1行　進む
  HOME = Control{A} 32ms # {Home}
  END = Control{E} 32ms # {End}
  BUN_MATU = Meta{ArrowDown} #文末に移動
  COPY = Meta{C} 32ms
  PASTE = Meta{V} 32ms
  CUT = Meta{X} 32ms
  SAI_HEN = Lang1 Lang1 # 再変換
  KATA_HEN = Control{I} # ^i カタカナ
  HIRA_HEN = Control{U} # ^u ひらがな
  SAVE = Meta{S} # ファイル保存
  Undo = Meta{Z} # Undo
  Redo = Shift{Meta{Z}} # Redo
  CLIP_CLR = CHR["　"] (Shift Control){B} 24ms Meta{X} 24ms
[default]

[system="Windows"]
  ime_complete = Slash Enter Backspace # 汎用: Slash Enter Backspace   # 「・」が残る欠点あり
  ime_pause = ime_complete Lang2
  ime_resume = Lang1

  _ = ime_pause "$0" ime_resume ^
  CHR = "$0" Enter
  STR = ime_pause "$0" ime_resume ^

  PREV = ArrowRight # 1行戻る 縦書き 右移動
  NEXT = ArrowLeft # 1行進む 縦書き 左移動
  HOME = Home # {Home}
  END = End # {End}
  BUN_MATU = Control{End} #文末に移動
  COPY = Control{C}
  PASTE = Control{V{130ms}}
  CUT = Control{X}
  SAI_HEN = M_{Slash} IMEState # 再変換
  KATA_HEN = F7 # ^i カタカナ
  HIRA_HEN = F6 # ^u ひらがな
  SAVE = Control{S} # ファイル保存
  Undo = Control{Z} # Undo
  Redo = Control{Y} # Redo
  CLIP_CLR = Enter{24ms} Space Shift{Home} Control{X} Backspace # コピークリア
[default]

  Q1 = ($5 $6) >> $0
  Q2 = ($5 $7) >> $1
  Q3 = ($5 $8) >> $2
  Q4 = ($5 $9) >> $3
  Q5 = ($5 $10) >> $4

  Q12345 = Q1; Q2; Q3; Q4; Q5
  Q1234_ = Q1; Q2; Q3; Q4
  Q123_5 = Q1; Q2; Q3;     Q5
  Q123__ = Q1; Q2; Q3
  Q12_45 = Q1; Q2;     Q4; Q5
  Q12_4_ = Q1; Q2;     Q4
  Q12__5 = Q1; Q2;         Q5
  Q12___ = Q1; Q2
  Q1_345 = Q1;     Q3; Q4; Q5
  Q1_34_ = Q1;     Q3; Q4 
  Q1_3_5 = Q1;     Q3      Q5
  Q1_3__ = Q1;     Q3
  Q1__45 = Q1;         Q4; Q5
  Q1__4_ = Q1;         Q4
  Q1___5 = Q1;             Q5
  Q1____ = Q1
  Q_2345 =     Q2; Q3; Q4; Q5
  Q_234_ =     Q2; Q3; Q4
  Q_23_5 =     Q2; Q3;     Q5
  Q_23__ =     Q2; Q3
  Q_2_45 =     Q2;     Q4; Q5
  Q_2_4_ =     Q2;     Q4
  Q_2__5 =     Q2;         Q5
  Q_2___ =     Q2
  Q__345 =         Q3; Q4; Q5
  Q__34_ =         Q3; Q4 
  Q__3_5 =         Q3;     Q5
  Q__3__ =         Q3
  Q___45 =             Q4; Q5
  Q___4_ =             Q4
  Q____5 =                 Q5

  EDIT_1Q = Q12345[ $0, $1, $2, $3, $4, J K, Q,W,E,R,T ]
  EDIT_1A = Q12345[ $0, $1, $2, $3, $4, J K, A,S,D,F,G ]
  EDIT_1Z = Q12345[ $0, $1, $2, $3, $4, J K, Z,X,C,V,B ]
  EDIT_1Y = Q12345[ $0, $1, $2, $3, $4, D F, Y,U,I,O,P ]
  EDIT_1H = Q12345[ $0, $1, $2, $3, $4, D F, H,J,K,L,Semicolon  ]
  EDIT_1N = Q12345[ $0, $1, $2, $3, $4, D F, N,M,Comma,Period,Slash ]

  EDIT_2Q = Q12345[ $0, $1, $2, $3, $4, M Comma, Q,W,E,R,T ]
  EDIT_2A = Q12345[ $0, $1, $2, $3, $4, M Comma, A,S,D,F,G ]
  EDIT_2Z = Q12345[ $0, $1, $2, $3, $4, M Comma, Z,X,C,V,B ]
  EDIT_2Y = Q12345[ $0, $1, $2, $3, $4, C V, Y,U,I,O,P ]
  EDIT_2H = Q12345[ $0, $1, $2, $3, $4, C V, H,J,K,L,Semicolon ]
  EDIT_2N = Q12345[ $0, $1, $2, $3, $4, C V, N,M,Comma,Period,Slash ]

  MEISI_Q = Q12345[ STR["$0"], STR["$1"], STR["$2"], STR["$3"], STR["$4"], U I, Q,W,E,R,T ]
  MEISI_A = Q12345[ STR["$0"], STR["$1"], STR["$2"], STR["$3"], STR["$4"], U I, A,S,D,F,G ]
  MEISI_Z = Q12345[ STR["$0"], STR["$1"], STR["$2"], STR["$3"], STR["$4"], U I, Z,X,C,V,B ]
  MEISI_Y = Q12345[ STR["$0"], STR["$1"], STR["$2"], STR["$3"], STR["$4"], E R, Y,U,I,O,P ]
  MEISI_H = Q12345[ STR["$0"], STR["$1"], STR["$2"], STR["$3"], STR["$4"], E R, H,J,K,L,Semicolon ]
  MEISI_N = Q12345[ STR["$0"], STR["$1"], STR["$2"], STR["$3"], STR["$4"], E R, N,M,Comma,Period,Slash ]

  CS_KB_ = $5{$6} >> $0; $5{$7} >> $1; $5{$8} >> $2; $5{$9} >> $3; $5{$10} >> $4
  CS_KB_Q = CS_KB_[ $0, $1, $2, $3, $4, Space, Q,W,E,R,T ]
  CS_KB_A = CS_KB_[ $0, $1, $2, $3, $4, Space, A,S,D,F,G ]
  CS_KB_Z = CS_KB_[ $0, $1, $2, $3, $4, Space, Z,X,C,V,B ]
  CS_KB_Y = CS_KB_[ $0, $1, $2, $3, $4, Space, Y,U,I,O,P ]
  CS_KB_H = CS_KB_[ $0, $1, $2, $3, $4, Space, H,J,K,L,Semicolon  ]
  CS_KB_N = CS_KB_[ $0, $1, $2, $3, $4, Space, N,M,Comma,Period,Slash ]
  KB_ = $5 >> $0; $6 >> $1; $7 >> $2; $8 >> $3; $9 >> $4
  KB_Q = KB_[ $0, $1, $2, $3, $4, Q,W,E,R,T ]
  KB_A = KB_[ $0, $1, $2, $3, $4, A,S,D,F,G ]
  KB_Z = KB_[ $0, $1, $2, $3, $4, Z,X,C,V,B ]
  KB_Y = KB_[ $0, $1, $2, $3, $4, Y,U,I,O,P ]
  KB_H = KB_[ $0, $1, $2, $3, $4, H,J,K,L,Semicolon  ]
  KB_N = KB_[ $0, $1, $2, $3, $4, N,M,Comma,Period,Slash ]
[default]
# END naginata_alias.conf
#定義をファイル分割する箇所　ここまで

  NaginataOff = Virtual
  IMEState = Virtual
  ime_on = IMEState Lang1 # かなオン
  ime_off = !IMEState 16ms Lang2 # かなオフ

# =============================================
# 英数モード
# =============================================
[modifier = "!NaginataOff !IMEState !Shift !Meta !Control !Alt"]
#　キーボード側のSandSを使う場合はコメントアウトして無効化してください
#
  Space{Any} >> Shift{Any} # SandS

# ********** 3キー同時 **********
# 編集モード1  JK DF
  EDIT_1Q[  BUN_MATU^, CHR[／]^,         ,    SAVE^, CHR[・]^ ]; EDIT_1Y[        HOME^, S_{END} BS^,  SAI_HEN^,          DEL^, S_{ESCx[3]}^ ]
  EDIT_1A[ STR[……] , CHR[『]^, CHR[？]^, CHR[「]^, CHR[（]^ ]; EDIT_1H[ S_{RET} END^,         UP^,   S_{UP}^,   S_{UPx[7]}^,    KATA_HEN^ ]
  EDIT_1Z[ CHR[――]^, CHR[』]^, CHR[！]^, CHR[」]^, CHR[）]^ ]; EDIT_1N[         END^,       DOWN^, S_{DOWN}^, S_{DOWNx[7]}^,    HIRA_HEN^ ]

# 編集モード2  MComma CV
  SERIHU_HAGI = HOME PREV END DELx[2] NEXT # セリフ接ぎ
  TOGAKI_HAGI = HOME PREV END DELx[4] NEXT # ト書き接ぎ
  SERIHU_KIRI = HOME CR{24ms} SP_x[1] NEXT # セリフ切り
  TOGAKI_KIRI = HOME CR{24ms} SP_x[3] NEXT # ト書き切り
  __x__x__x = STR["　　　×　　　×　　　×"] CR

  EDIT_2Q[ CHR[｜]^, __x__x__x ,  SERIHU_HAGI^,        SERIHU_KIRI^,            CHR[〇]^ ]; EDIT_2Y[ S_{HOME}^,      CUT^,   SAI_HEN^,        PASTE^,          Undo^ ]
  EDIT_2A[ CHR[《]^,   CHR[【]^,  TOGAKI_HAGI^,        TOGAKI_KIRI^,            SP_x[3]^ ]; EDIT_2H[     COPY^,     LEFT^,     RIGHT^, S_{LEFTx[7]}^, S_{RIGHTx[7]}^ ]
  EDIT_2Z[ CHR[》]^,   CHR[】]^,   CHR[」] CR^, CHR[」] CR CHR[「]^, CHR[」] CR SP_x[1]^ ]; EDIT_2N[  S_{END}^, S_{LEFT}^, S_{RIGHT}^, END S_{HOME}^,          Redo^ ]

# ********** 2キー同時 **********
# 機能部分
  (H J) >> ime_on ^
  (F G) >> ime_off ^
  (V M) >> Enter ^

# =============================================
# かなモード
# =============================================
[modifier = "!NaginataOff IMEState !Meta !Control !Alt"]
# 左右シフト+アルファベット で英数モードに
  Alpha = A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z
  Shift{Alpha} >> Shift{Alpha} !Shift Enter ime_off ^

# 左右シフト+アルファベット以外
  apply[ Shift{$0} >> Shift{$0}, Semicolon, Comma, Period, Slash ]

# ********** センターシフト **********
  TOU_TEN = ( Comma Enter )^ # "、" 読点（とうてん）
  KU_TEN = ( Period Enter )^ # "。" 句点（くてん）

  CS_KB_Q[ vu[ヴ], me[め],  ri[り],      ne[ね], S_{LEFT[シ左]} ]; CS_KB_Y[ S_{RIGHT[シ右]},     sa[さ], yo[よ],  e[え], yu[ゆ] ]
  CS_KB_A[ se[せ], mi[み],  ni[に],      ma[ま],         ti[ち] ]; CS_KB_H[          ya[や],     no[の], mo[も], tu[つ], hu[ふ] ]
  CS_KB_Z[ ho[ほ], hi[ひ],  wo[を], TOU_TEN[、],         nu[ぬ] ]; CS_KB_N[           o[お], KU_TEN[。], mu[む], wa[わ], re[れ] ]

# ********** 4キー同時 **********
# 薙刀百式 右手 4キー同時
# A S D
  Q____5[ _______, _______, _______, _______, _[変換], A S D, Y,U,I,O,P ]
  Q__3__[ _______, _______, _[以上], _______, _______, A S D, H,J,K,L,Semicolon ]
  Q1____[ _[面白], _______, _______, _______, _______, A S D, N,M,Comma,Period,Slash ]

# Z X C
  Q____5[ _______, _______, _______, _______, _[返還], Z X C, Y,U,I,O,P ]
  Q__3__[ _______, _______, _[異常], _______, _______, Z X C, H,J,K,L,Semicolon ]
# Q_____[ _______, _______, _______, _______, _______, Z X C, N,M,Comma,Period,Slash ]

# Q W E
# Q_____[ _______, _______, _______, _______, _______, Q W E, Y,U,I,O,P ]
  Q__3__[ _______, _______, _[意図], _______, _______, Q W E, H,J,K,L,Semicolon ]
# Q_____[ _______, _______, _______, _______, _______, Q W E, N,M,Comma,Period,Slash ]

# D F G
# Q_____[ _______, _______, _______, _______, _______, D F G, Y,U,I,O,P ]
  Q__3__[ _______, _______, _[以外], _______, _______, D F G, H,J,K,L,Semicolon ]
# Q_____[ _______, _______, _______, _______, _______, D F G, N,M,Comma,Period,Slash ]

# C V B
# Q_____[ _______, _______, _______, _______, _______, C V B, Y,U,I,O,P ]
  Q__3__[ _______, _______, _[意外], _______, _______, C V B, H,J,K,L,Semicolon ]
# Q_____[ _______, _______, _______, _______, _______, C V B, N,M,Comma,Period,Slash ]

# E R T
# Q_____[ _______, _______, _______, _______, _______, E R T, Y,U,I,O,P ]
  Q__3__[ _______, _______, _[位置], _______, _______, E R T, H,J,K,L,Semicolon ]
# Q_____[ _______, _______, _______, _______, _______, E R T, N,M,Comma,Period,Slash ]

# 薙刀百式 左手 4キー同時
# K L Semicolon
 Q__34_[ _______, _______, _[出来], _[仕様], _______, K L Semicolon, Q,W,E,R,T ]
 Q12_4_[ _[性格], _[検討], _______, _[確立], _______, K L Semicolon, A,S,D,F,G ]
 Q1__4_[ _[補完], _______, _______, _[光景], _______, K L Semicolon, Z,X,C,V,B ]

# Comma Period Slash
 Q___4_[ _______, _______, _______, _[使用], _______, Comma Period Slash, Q,W,E,R,T ]
 Q12_4_[ _[正確], _[見当], _______, _[確率], _______, Comma Period Slash, A,S,D,F,G ]
 Q1__4_[ _[補間], _______, _______, _[後継], _______, Comma Period Slash, Z,X,C,V,B ]

# I O P
 Q___4_[ _______, _______, _______, _[初動], _______, I O P, Q,W,E,R,T ]
 Q___4_[ _______, _______, _______, _[漢字], _______, I O P, A,S,D,F,G ]
 Q1__4_[ _[保管], _______, _______, _[語句], _______, I O P, Z,X,C,V,B ]

# H J K
  Q___4_[ _______, _______, _______, _[状態], _______, H J K, Q,W,E,R,T ]
  Q_2_4_[ _______, _[軽快], _______, _[完結], _______, H J K, A,S,D,F,G ]
# Q_____[ _______, _______, _______, _______, _______, H J K, Z,X,C,V,B ]

# N M Comma
  Q___4_[ _______, _______, _______, _[上体], _______, N M Comma, Q,W,E,R,T ]
  Q_2_4_[ _______, _[警戒], _______, _[簡潔], _______, N M Comma, A,S,D,F,G ]
# Q_____[ _______, _______, _______, _______, _______, N M Comma, Z,X,C,V,B ]

# Y U I
# Q_____[ _______, _______, _______, _______, _______, Y U I, Q,W,E,R,T ]
# Q_____[ _______, _______, _______, _______, _______, Y U I, A,S,D,F,G ]
# Q_____[ _______, _______, _______, _______, _______, Y U I, Z,X,C,V,B ]

# 薙刀百式 右手 ３キー同時
# S D
  Q__3__[ _______, _______,   _[良], _______, _______, S D, Y,U,I,O,P ]
  Q__345[ _______, _______,   _[言],   _[打],   _[分], S D, H,J,K,L,Semicolon ]
  Q1____[   _[押], _______, _______, _______, _______, S D, N,M,Comma,Period,Slash ]

# X C
# Q_____[ _______, _______, _______, _______, _______, X C, Y,U,I,O,P ]
  Q__3_5[ _______, _______,   _[行], _______,   _[文], X C, H,J,K,L,Semicolon ]
  Q1____[   _[推], _______, _______, _______, _______, X C, N,M,Comma,Period,Slash ]

# W E
# Q_____[ _______, _______, _______, _______, _______, W E, Y,U,I,O,P ]
  Q__3__[ _______, _______,   _[良], _______, _______, W E, H,J,K,L,Semicolon ]
# Q_____[ _______, _______, _______, _______, _______, W E, N,M,Comma,Period,Slash ]

# A S
# Q_____[ _______, _______, _______, _______, _______, A S, Y,U,I,O,P ]
  Q__34_[ _______, _______, _[一意],   _[詰], _______, A S, H,J,K,L,Semicolon ]
  Q1____[   _[奥], _______, _______, _______, _______, A S, N,M,Comma,Period,Slash ]

# Z X
# Q_____[ _______, _______, _______, _______, _______, Z X, Y,U,I,O,P ]
  Q__34_[ _______, _______, _[一位],   _[積], _______, Z X, H,J,K,L,Semicolon ]
  Q1____[   _[置], _______, _______, _______, _______, Z X, N,M,Comma,Period,Slash ]

# Q W
  Q12345[   _[万],   _[七],   _[八],   _[九],   _[十], Q W, Y,U,I,O,P ]
  Q12345[   _[億],   _[四],   _[五],   _[六],   _[百], Q W, H,J,K,L,Semicolon ]
  Q12345[   _[〇],   _[一],   _[二],   _[三],   _[千], Q W, N,M,Comma,Period,Slash ]

# S E
# Q_____[ _______, _______, _______, _______, _______, S E, Y,U,I,O,P ]
# Q_____[ _______, _______, _______, _______, _______, S E, H,J,K,L,Semicolon ]
# Q_____[ _______, _______, _______, _______, _______, S E, N,M,Comma,Period,Slash ]

# X D
# Q_____[ _______, _______, _______, _______, _______, X D, Y,U,I,O,P ]
# Q_____[ _______, _______, _______, _______, _______, X D, H,J,K,L,Semicolon ]
# Q_____[ _______, _______, _______, _______, _______, X D, N,M,Comma,Period,Slash ]

# W D
# Q_____[ _______, _______, _______, _______, _______, W D, Y,U,I,O,P ]
# Q_____[ _______, _______, _______, _______, _______, W D, H,J,K,L,Semicolon ]
# Q_____[ _______, _______, _______, _______, _______, W D, N,M,Comma,Period,Slash ]

# S C
# Q_____[ _______, _______, _______, _______, _______, S C, Y,U,I,O,P ]
# Q_____[ _______, _______, _______, _______, _______, S C, H,J,K,L,Semicolon ]
# Q_____[ _______, _______, _______, _______, _______, S C, N,M,Comma,Period,Slash ]

# W A
# Q_____[ _______, _______, _______, _______, _______, W A, Y,U,I,O,P ]
# Q_____[ _______, _______, _______, _______, _______, W A, H,J,K,L,Semicolon ]
# Q_____[ _______, _______, _______, _______, _______, W A, N,M,Comma,Period,Slash ]

# Z S
# Q_____[ _______, _______, _______, _______, _______, Z S, Y,U,I,O,P ]
# Q_____[ _______, _______, _______, _______, _______, Z S, H,J,K,L,Semicolon ]
# Q_____[ _______, _______, _______, _______, _______, Z S, N,M,Comma,Period,Slash ]

# 薙刀百式 左手 ３キー同時
# K L
  Q_234_[ _______,   _[効],   _[的],   _[締], _______, K L, Q,W,E,R,T ]
  Q_2_4_[ _______,   _[道], _______,   _[書], _______, K L, A,S,D,F,G ]
  Q__3__[ _______, _______,   _[話], _______, _______, K L, Z,X,C,V,B ]

# Comma Period
  Q_234_[ _______,   _[聞],   _[適],   _[占], _______, Comma Period, Q,W,E,R,T ]
  Q_234_[ _______, _[未知],   _[取],   _[描], _______, Comma Period, A,S,D,F,G ]
  Q__3__[ _______, _______,   _[離], _______, _______, Comma Period, Z,X,C,V,B ]

# I O
  Q__34_[ _______, _______,   _[敵],   _[絞], _______, I O, Q,W,E,R,T ]
  Q__34_[ _______, _______,   _[撮],   _[感], _______, I O, A,S,D,F,G ]
# Q_____[ _______, _______, _______, _______, _______, I O, Z,X,C,V,B ]

# L Semicolon
  Q_2_4_[ _______,   _[気], _______,   _[字], _______, L Semicolon, Q,W,E,R,T ]
  Q__34_[ _______, _______,   _[採],   _[方], _______, L Semicolon, A,S,D,F,G ]
  Q__3__[ _______, _______,   _[速], _______, _______, L Semicolon, Z,X,C,V,B ]

# Period Slash
  Q_2_4_[ _______,   _[機], _______,   _[次], _______, Period Slash, Q,W,E,R,T ]
  Q__34_[ _______, _______,   _[摂],   _[型], _______, Period Slash, A,S,D,F,G ]
  Q__3__[ _______, _______,   _[早], _______, _______, Period Slash, Z,X,C,V,B ]

# O P
  Q_2_4_[ _______,   _[期], _______,   _[時], _______, O P, Q,W,E,R,T ]
  Q___4_[ _______, _______, _______,   _[形], _______, O P, A,S,D,F,G ]
# Q_____[ _______, _______, _______, _______, _______, O P, Z,X,C,V,B ]

# 薙刀百式　ここまで

# ********** 3キー同時 **********
# シフトキー
  R_DK = J # {右濁}
  L_DK = F # {左濁}
  R_HN = M # {右半}
  L_HN = V # {左半}
  KO_GAKI = Q # {小}

# 通常キー
# 右手の濁音になるキー
  _SA = U # {さ}
  _SU = O # {す}
  _HE = P # {へ}
  _KU = H # {く}
  _TU = L # {つ}
  _HU = Semicolon # {ふ}
  _TA = N # {た}

# 左手の濁音になるキー
  _KI = W # {き}
  _TE = E #{て}
  _SI = R #{し}
  _SE = A #{せ}
  _KE = S #{け}
  _TO = D #{と}
  _KA = F #{か}
  _TI = G #{ち}
  _HO = Z #{ほ}
  _HI = X #{ひ}
  _HA = C #{は}
  _KO = V #{こ}
  _SO = B #{そ}

# 右手の小書きになるキー
  __A = J # {あ}
  __I = K # {い}
  __U = L # {う}
  __E = O # {え}
  __O = N # {お}
  _YA = H # {や}
  _YU = P # {ゆ}
  _YO = I # {よ}
  _WA = Period # {わ}

# 清音専門拗音のキー
  _RI = E # {り}
  _MI = S # {み}
  _NI = D # {に}

# 拗音、外来音
  ( R_DK[右濁] _KI[き] _YA[や] ) >> gya[ぎゃ]
  ( R_DK[右濁] _KI[き] _YU[ゆ] ) >> gyu[ぎゅ]
  ( R_DK[右濁] _KI[き] _YO[よ] ) >> gyo[ぎょ]
  ( R_DK[右濁] _SI[し] _YA[や] ) >> zya[じゃ]
  ( R_DK[右濁] _SI[し] _YU[ゆ] ) >> zyu[じゅ]
  ( R_DK[右濁] _SI[し] _YO[よ] ) >> zyo[じょ]
  ( R_DK[右濁] _TI[ち] _YA[や] ) >> dya[ぢゃ]
  ( R_DK[右濁] _TI[ち] _YU[ゆ] ) >> dyu[ぢゅ]
  ( R_DK[右濁] _TI[ち] _YO[よ] ) >> dyo[ぢょ]

  ( R_DK[右濁] _HI[ひ] _YA[や] ) >> bya[びゃ]
  ( R_DK[右濁] _HI[ひ] _YU[ゆ] ) >> byu[びゅ]
  ( R_DK[右濁] _HI[ひ] _YO[よ] ) >> byo[びょ]
  ( R_HN[右半] _HI[ひ] _YA[や] ) >> pya[ぴゃ]
  ( R_HN[右半] _HI[ひ] _YU[ゆ] ) >> pyu[ぴゅ]
  ( R_HN[右半] _HI[ひ] _YO[よ] ) >> pyo[ぴょ]

  ( R_HN[右半] _TE[て] __I[い] ) >> thi[てぃ]
  ( R_HN[右半] _TE[て] _YU[ゆ] ) >> thu[てゅ]
  ( R_DK[右濁] _TE[て] __I[い] ) >> dhi[でぃ]
  ( R_DK[右濁] _TE[て] _YU[ゆ] ) >> dhu[でゅ]

  ( R_HN[右半] _TO[と] __U[う] ) >> twu[とぅ]
  ( R_DK[右濁] _TO[と] __U[う] ) >> dwu[どぅ]

  ( R_HN[右半] _SI[し] __E[え] ) >> sye[しぇ]
  ( R_HN[右半] _TI[ち] __E[え] ) >> tye[ちぇ]
  ( R_DK[右濁] _SI[し] __E[え] ) >> je[じぇ]
  ( R_DK[右濁] _TI[ち] __E[え] ) >> dye[ぢぇ]

  ( L_HN[左半] _HU[ふ] __A[あ] ) >> fa[ふぁ]
  ( L_HN[左半] _HU[ふ] __I[い] ) >> fi[ふぃ]
  ( L_HN[左半] _HU[ふ] _YU[ゆ] ) >> fyu[ふゅ]
  ( L_HN[左半] _HU[ふ] __E[え] ) >> fe[ふぇ]
  ( L_HN[左半] _HU[ふ] __O[お] ) >> fo[ふぉ]

  ( R_HN[右半] KO_GAKI[小] __A[あ] ) >> va[ゔぁ]
  ( R_HN[右半] KO_GAKI[小] __I[い] ) >> vi[ゔぃ]
  ( R_HN[右半] KO_GAKI[小] _YU[ゆ] ) >> vyu[ゔゅ]
  ( R_HN[右半] KO_GAKI[小] __E[え] ) >> ve[ゔぇ]
  ( R_HN[右半] KO_GAKI[小] __O[お] ) >> vo[ゔぉ]

  ( L_HN[左半] __U[う] __I[い] ) >> wi[うぃ]
  ( L_HN[左半] __U[う] __E[え] ) >> we[うぇ]
  ( L_HN[左半] __U[う] __O[お] ) >> who[うぉ]
  ( L_HN[左半] __I[い] __E[え] ) >> ye[いぇ]
  ( L_HN[左半] _TU[つ] __A[あ] ) >> tsa[つぁ]

  ( L_HN[左半] _KU[く] __A[あ] ) >> qa[くぁ]
  ( L_HN[左半] _KU[く] __I[い] ) >> qi[くぃ]
  ( L_HN[左半] _KU[く] __E[え] ) >> qe[くぇ]
  ( L_HN[左半] _KU[く] __O[お] ) >> qo[くぉ]
  ( L_HN[左半] _KU[く] _WA[わ] ) >> kuxwa[くゎ]

  ( L_DK[左濁] _KU[く] __A[あ] ) >> gwa[ぐぁ]
  ( L_DK[左濁] _KU[く] __I[い] ) >> gwi[ぐぃ]
  ( L_DK[左濁] _KU[く] __E[え] ) >> gwe[ぐぇ]
  ( L_DK[左濁] _KU[く] __O[お] ) >> gwo[ぐぉ]
  ( L_DK[左濁] _KU[く] _WA[わ] ) >> guxwa[ぐゎ]

# 編集モード1  JK DF
  NAKA_GURO = Slash # ”・”　中黒

  EDIT_1Q[  BUN_MATU^, CHR[／]^,         ,    SAVE^, NAKA_GURO^ ]; EDIT_1Y[        HOME^, S_{END} BS^,  SAI_HEN^,          DEL^, S_{ESCx[3]}^ ]
  EDIT_1A[ STR[……] , CHR[『]^, CHR[？]^, CHR[「]^,   CHR[（]^ ]; EDIT_1H[ S_{RET} END^,         UP^,   S_{UP}^,   S_{UPx[7]}^,    KATA_HEN^ ]
  EDIT_1Z[ CHR[――]^, CHR[』]^, CHR[！]^, CHR[」]^,   CHR[）]^ ]; EDIT_1N[         END^,       DOWN^, S_{DOWN}^, S_{DOWNx[7]}^,    HIRA_HEN^ ]

# 編集モード2   MComma CV
  SERIHU_HAGI = HOME PREV END DELx[2] NEXT # セリフ接ぎ
  TOGAKI_HAGI = HOME PREV END DELx[4] NEXT # ト書き接ぎ
  SERIHU_KIRI = HOME CR{24ms} SP_x[1] NEXT # セリフ切り
  TOGAKI_KIRI = HOME CR{24ms} SP_x[3] NEXT # ト書き切り
  __x__x__x = STR["　　　×　　　×　　　×"] CR

  EDIT_2Q[ CHR[｜]^, __x__x__x ,  SERIHU_HAGI^,        SERIHU_KIRI^,            CHR[〇]^ ]; EDIT_2Y[ S_{HOME}^,      CUT^,   SAI_HEN^,        PASTE^,          Undo^ ]
  EDIT_2A[ CHR[《]^,   CHR[【]^,  TOGAKI_HAGI^,        TOGAKI_KIRI^,            SP_x[3]^ ]; EDIT_2H[     COPY^,     LEFT^,     RIGHT^, S_{LEFTx[7]}^, S_{RIGHTx[7]}^ ]
  EDIT_2Z[ CHR[》]^,   CHR[】]^,   CHR[」] CR^, CHR[」] CR CHR[「]^, CHR[」] CR SP_x[1]^ ]; EDIT_2N[  S_{END}^, S_{LEFT}^, S_{RIGHT}^, END S_{HOME}^,          Redo^ ]

# 固有名詞ショートカット UI ER
  MEISI_Q[     , 天空のファルコーン, 天ファル, 神山,          ]; MEISI_Y[     ,     ,     , えりりん,      ]
  MEISI_A[     ,           ミツルギ,     韮澤,     , チャンプ ]; MEISI_H[ 山根,     ,     ,         , 深町 ]
  MEISI_Z[     ,                   ,         ,     ,          ]; MEISI_N[     ,     ,     ,     渡辺,      ]

# 濁音
  ( L_DK[左濁] _SA[さ] ) >> za[ざ]
  ( L_DK[左濁] _SU[す] ) >> zu[ず]
  ( L_DK[左濁] _HE[へ] ) >> be[べ]
  ( L_DK[左濁] _KU[く] ) >> gu[ぐ]
  ( L_DK[左濁] _TU[つ] ) >> du[づ]
  ( L_DK[左濁] _HU[ふ] ) >> bu[ぶ]
  ( L_DK[左濁] _TA[た] ) >> da[だ]

  ( R_DK[右濁] _KI[き] ) >> gi[ぎ]
  ( R_DK[右濁] _TE[て] ) >> de[で]
  ( R_DK[右濁] _SI[し] ) >> zi[じ]
  ( R_DK[右濁] _SE[せ] ) >> ze[ぜ]
  ( R_DK[右濁] _KE[け] ) >> ge[げ]
  ( R_DK[右濁] _TO[と] ) >> do[ど]
  ( R_DK[右濁] _KA[か] ) >> ga[が]
  ( R_DK[右濁] _TI[ち] ) >> di[ぢ]
  ( R_DK[右濁] _HO[ほ] ) >> bo[ぼ]
  ( R_DK[右濁] _HI[ひ] ) >> bi[び]
  ( R_DK[右濁] _HA[は] ) >> ba[ば]
  ( R_DK[右濁] _KO[こ] ) >> go[ご]
  ( R_DK[右濁] _SO[そ] ) >> zo[ぞ]

# 半濁音
  ( L_HN[左半] _HE[へ] ) >> pe[ぺ]
  ( L_HN[左半] _HU[ふ] ) >> pu[ぷ]
  ( R_HN[右半] _HO[ほ] ) >> po[ぽ]
  ( R_HN[右半] _HI[ひ] ) >> pi[ぴ]
  ( R_HN[右半] _HA[は] ) >> pa[ぱ]

# 小書き
  ( KO_GAKI[小] __A[あ] ) >> xa[ぁ]
  ( KO_GAKI[小] __I[い] ) >> xi[ぃ]
  ( KO_GAKI[小] __U[う] ) >> xu[ぅ]
  ( KO_GAKI[小] __E[え] ) >> xe[ぇ]
  ( KO_GAKI[小] __O[お] ) >> xo[ぉ]

  ( KO_GAKI[小] _YA[や] ) >> xya[ゃ]
  ( KO_GAKI[小] _YU[ゆ] ) >> xyu[ゅ]
  ( KO_GAKI[小] _YO[よ] ) >> xyo[ょ]
  ( KO_GAKI[小] _WA[わ] ) >> xwa[ゎ]
  ( KO_GAKI[小] _KA[か] ) >> xka[ヵ]
  ( KO_GAKI[小] _KE[け] ) >> xke[ヶ]

# 拗音、外来音
  ( _KI[き] _YA[や] ) >> kya[きゃ]
  ( _KI[き] _YU[ゆ] ) >> kyu[きゅ]
  ( _KI[き] _YO[よ] ) >> kyo[きょ]
  ( _RI[り] _YA[や] ) >> rya[りゃ]
  ( _RI[り] _YU[ゆ] ) >> ryu[りゅ]
  ( _RI[り] _YO[よ] ) >> ryo[りょ]
  ( _SI[し] _YA[や] ) >> sya[しゃ]
  ( _SI[し] _YU[ゆ] ) >> syu[しゅ]
  ( _SI[し] _YO[よ] ) >> syo[しょ]

  ( _MI[み] _YA[や] ) >> mya[みゃ]
  ( _MI[み] _YU[ゆ] ) >> myu[みゅ]
  ( _MI[み] _YO[よ] ) >> myo[みょ]
  ( _NI[に] _YA[や] ) >> nya[にゃ]
  ( _NI[に] _YU[ゆ] ) >> nyu[にゅ]
  ( _NI[に] _YO[よ] ) >> nyo[にょ]
  ( _TI[ち] _YA[や] ) >> tya[ちゃ]
  ( _TI[ち] _YU[ゆ] ) >> tyu[ちゅ]
  ( _TI[ち] _YO[よ] ) >> tyo[ちょ]

  ( _HI[ひ] _YA[や] ) >> hya[ひゃ]
  ( _HI[ひ] _YU[ゆ] ) >> hyu[ひゅ]
  ( _HI[ひ] _YO[よ] ) >> hyo[ひょ]

# 機能部分
  (H J) >> ime_on ^
  (F G) >> ime_off ^
  (V M) >> Enter ^

# ********** 単打 **********
  ON_BIKI = Minus ^ # "ー" 音引き（おんびき）

  KB_Q[ vu[ヴ], ki[き], te[て], si[し], LEFT[左] ]; KB_Y[ RIGHT[右], BS[後], ru[る], su[す],      he[へ] ]
  KB_A[ ro[ろ], ke[け], to[と], ka[か],  xtu[っ] ]; KB_H[    ku[く],  a[あ],  i[い],  u[う], ON_BIKI[ー] ]
  KB_Z[ ho[ほ], hi[ひ], ha[は], ko[こ],   so[そ] ]; KB_N[    ta[た], na[な], xn[ん], ra[ら],      re[れ] ]

[default]
  (Control Shift){0} >> NaginataOff ^ # 薙刀式オフ
  (Control Shift){1} >> !NaginataOff ^ # 薙刀式再開

